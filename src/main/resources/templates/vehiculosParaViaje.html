<!DOCTYPE html>
<html lang="es" xmlns:data-th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Seleccionar Vehículo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet">
</head>

<body class="container mt-5">
<div th:replace="layout :: header"></div> <!--TRAEMOS EL ARCHIVO LAYOUT CON EL FRAGMENTO HEADER-->

<div class="container mt-4">

    <h3 class="mb-4">Seleccione un Vehículo</h3>

    <div class="alert alert-info" style="padding: 8px 15px;">
        Usuario seleccionado:
        <b data-th-text="${usuarioSeleccionado.nombre + ' ' + usuarioSeleccionado.apellido}"></b>
    </div>

     <!-- 3 TARJETAS POR FILA -->
<div class="row row-cols-1 row-cols-md-3 g-4">

    <!-- UNA COLUMNA POR CADA VEHÍCULO -->
    <div class="col d-flex" data-th-each="vehiculo : ${listaVehiculos}">
        <div class="card shadow-sm w-100" style="min-height: 360px;">

            <!-- Imagen más chica -->
            <img class="card-img-top"
                 style="height:130px; object-fit:contain;"
                 data-th-src="${vehiculo.patente == 'DIG214' ? 'https://i.postimg.cc/W4ZDXLY7/Whats-App-Image-2025-11-20-at-10-13-33-PM.jpg' :
                               vehiculo.patente == 'MQA203' ? 'https://i.postimg.cc/tg612Qv2/Whats-App-Image-2025-11-20-at-10-13-32-PM-(1).jpg' :
                               vehiculo.patente == 'SMT222' ? 'https://i.postimg.cc/Xv5ZQS1x/Whats-App-Image-2025-11-20-at-10-13-32-PM.jpg' :
                               'https://via.placeholder.com/400x250?text=Vehiculo'}">

            <div class="card-body" style="padding: 10px;">
                <h6 class="card-title mb-2" style="font-size: 1rem;">
                    Patente: <span data-th-text="${vehiculo.patente}"></span>
                </h6>

                <p style="margin-bottom: 4px; font-size: 0.9rem;">
                    <strong>Marca:</strong> <span data-th-text="${vehiculo.marca}"></span>
                </p>
                <p style="margin-bottom: 4px; font-size: 0.9rem;">
                    <strong>Modelo:</strong> <span data-th-text="${vehiculo.modelo}"></span>
                </p>
                <p style="margin-bottom: 4px; font-size: 0.9rem;">
                <p><strong>Tipo:</strong> 
   <span style="color: #2563eb; font-weight: 600;"
         data-th-text="${vehiculo.tipo}">
   </span>
</p>
                </p>

                <p style="font-size: 0.9rem;">
                    <strong>Conductor:</strong>
                    <span data-th-text="${vehiculo.conductor != null ?
                        vehiculo.conductor.nombre + ' ' + vehiculo.conductor.apellido :
                        'Sin asignar'}"></span>
                </p>
            </div>

            <div class="card-footer bg-transparent">
                <a class="btn btn-success w-100"
                   style="padding: 5px; font-size: 0.9rem;"
                   data-th-href="@{/nuevoViaje(dniUsuario=${usuarioSeleccionado.dni}, patenteVehiculo=${vehiculo.patente})}">
                    Elegir
                </a>
            </div>

        </div>
    </div>

</div>


<!-- FOOTER -->
<div th:replace="layout :: footer"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>